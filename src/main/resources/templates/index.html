<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:replace="~{fragments/layout :: head}"></th:block>
    <title>Homepage v1 - eCommerce HTML Template - FreshCart</title>
</head>

<body>

<div th:replace="~{fragments/navbar :: navbar}"></div>
<div th:replace="~{fragments/layout :: modals}"></div>

<main>
    <section class="mt-8">
    </section>

    <section class="mb-lg-10 mt-lg-14 my-8">
    </section>

    <section>
    </section>

    <section class="my-lg-14 my-8">
        <div class="container">
            <div class="row">
                <div class="col-12 mb-6">
                    <h3 class="mb-0">Popular Products</h3>
                </div>
            </div>

            <div class="row g-4 row-cols-lg-5 row-cols-2 row-cols-md-3">
                <div class="col" th:each="product : ${popularProducts}">
                    <div th:replace="~{fragments/product-card :: product-card(product=${product})}"></div>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="container">
            <div class="row">
                <div class="col-md-12 mb-6">
                    <div class="d-flex justify-content-between align-items-center">
                        <h3 class="mb-0">Daily Best Sells</h3>
                    </div>
                </div>
            </div>

            <div class="row g-4">

                <div class="col-lg-3 d-none d-lg-block">
                    <div class="h-100 rounded"
                         th:style="'background-image: url(' + @{/assets/images/banner/banner-deal.jpg} + ');' +
                               'background-size: cover; ' +
                               'background-position: center; ' +
                               'min-height: 470px; ' +
                               'position: relative;'">

                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                            <a href="#!" class="btn btn-success btn-lg">
                                Shop Now <i class="bi bi-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-lg-9">
                    <div class="deals-slider">

                        <div th:each="product : ${bestSellsProducts}" class="px-2 h-100">
                            <div th:replace="~{fragments/product-card-deal :: product-card-deal(product=${product})}"></div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </section>
    <section class="my-lg-14 my-8">
    </section>
</main>

<footer th:replace="~{fragments/layout :: footer}" class="footer"></footer>

<div th:replace="~{fragments/layout :: scripts}"></div>

<script th:inline="javascript">
    document.addEventListener("DOMContentLoaded", function () {
        if (window.jQuery && window.jQuery.fn.slick) {

            $('.deals-slider').slick({
                infinite: true,
                slidesToShow: 3,
                slidesToScroll: 3,
                arrows: true,
                dots: false,
                prevArrow: '<button type="button" class="slick-prev"><i class="bi bi-chevron-left"></i></button>',
                nextArrow: '<button type="button" class="slick-next"><i class="bi bi-chevron-right"></i></button>',
                autoplay: true,
                autoplaySpeed: 10000,
                responsive: [
                    {
                        breakpoint: 1200,
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 2
                        }
                    },
                    {
                        breakpoint: 768,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    }
                ]
            });
        } else {
            console.error("jQuery hoặc Slick Slider chưa được nạp. Slider 'deals-slider' sẽ không hoạt động.");
        }
    });
</script>

</body>
</html>