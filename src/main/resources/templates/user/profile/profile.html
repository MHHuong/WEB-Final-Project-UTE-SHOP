<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{user/user-layout}">
<body>
<main layout:fragment="content">
    <!-- Profile Section -->
    <section class="mb-lg-14 mb-8 mt-8">
        <div class="container">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-lg-3 col-md-4 col-12">
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-body">
                            <div class="text-center mb-4">
                                <div class="position-relative d-inline-block">
                                    <img th:src="@{/images/avatar/avatar-1.jpg}"
                                         alt="User Avatar"
                                         class="rounded-circle avatar-xl mb-3"
                                         id="user-avatar">
                                    <button class="btn btn-sm btn-light rounded-circle position-absolute bottom-0 end-0" style="width: 35px; height: 35px;">
                                        <i class="bi bi-camera"></i>
                                    </button>
                                </div>
                                <h5 class="mb-1" id="user-fullname">Loading...</h5>
                                <p class="text-muted mb-0 small" id="user-email">Loading...</p>
                            </div>
                            <hr>
                            <nav class="nav flex-column">
                                <a class="nav-link active" href="#" data-section="personal-info">
                                    <i class="bi bi-person me-2"></i>Personal Info
                                </a>
                                <a class="nav-link" href="#" data-section="orders">
                                    <i class="bi bi-bag me-2"></i>Orders
                                </a>
                                <a class="nav-link" href="#" data-section="love">
                                    <i class="bi bi-heart me-2"></i>Loved Products
                                </a>
                                <a class="nav-link" href="#" data-section="security">
                                    <i class="bi bi-shield-lock me-2"></i>Security
                                </a>
                                <a class="nav-link text-danger" href="#" id="logout-btn">
                                    <i class="bi bi-box-arrow-right me-2"></i>Logout
                                </a>
                            </nav>
                        </div>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="col-lg-9 col-md-8 col-12">
                    <!-- Personal Info Section -->
                    <div id="personal-info-section" class="content-section">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h4 class="mb-0">Personal Info</h4>
                            </div>
                            <div class="card-body">
                                <form id="personal-info-form" class="needs-validation" novalidate>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="fullName" class="form-label">Fullname</label>
                                            <input type="text" class="form-control" id="fullName" required>
                                            <div class="invalid-feedback">
                                                Please enter your full name.
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="email" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="email" readonly>
                                            <div class="invalid-feedback">
                                                Please enter a valid email address.
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="phone" class="form-label">Phone</label>
                                            <input type="tel" class="form-control" id="phone">
                                            <div class="invalid-feedback">
                                                Please enter a valid phone number.
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <button type="submit" class="btn btn-primary" id="save-personal-info-btn">
                                                <i class="bi bi-save me-2"></i>Save Changes
                                            </button>
                                        </div>
                                    </div>
                                </form>

                                <hr class="my-4">
                                <div th:replace="~{fragments/user/profile/address::address-view}"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Orders Section -->
                    <div th:replace="~{fragments/user/profile/order-view::order-view}"></div>

                    <!-- Loved Products Section -->
                    <div th:replace="~{fragments/user/profile/loved-products::loved-products-view}"></div>

                    <!-- Security Section -->
                    <div th:replace="~{fragments/user/profile/security::security-view}"></div>
                </div>
            </div>
        </div>
    </section>

    <div th:replace="~{fragments/user/profile/address::address-modal}"></div>
    <div th:replace="~{fragments/user/modal::status-modal}"></div>
    <script type="module" th:src="@{/js/services/view/profileService.js}"></script>

    <style>
        .avatar-xl {
            width: 100px;
            height: 100px;
            object-fit: cover;
        }

        .nav-link {
            color: #3d4f58;
            padding: 0.75rem 1rem;
            border-radius: 0.25rem;
            transition: all 0.3s;
        }

        .nav-link:hover {
            background-color: #f8f9fa;
        }

        .nav-link.active {
            background-color: #0aad0a;
            color: white;
        }

        .nav-link.active i {
            color: white;
        }

        .nav-link i {
            font-size: 1.1rem;
        }

        .card {
            transition: all 0.3s;
        }

        .card:hover {
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1) !important;
        }

        .nav-pills .nav-link {
            color: #6c757d;
        }

        .nav-pills .nav-link.active {
            background-color: #0aad0a;
        }
    </style>
</main>
</body>
</html>
