<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="admin/_layout :: head(~{::title})">
	<title>UTESHOP • Users</title>
</head>
<body>

<!-- Gọi layout chung & truyền fragment content -->
<div th:replace="admin/_layout :: layout(~{::content})">

	<div th:fragment="content">
		<style>
			/* style riêng cho trang Users */
			.page-wrap{max-width:1200px;margin:0 auto}
			.card{border-radius:14px}
			.table thead th{font-weight:600;color:#475467;background:#f8fafc}
			.role-badge{font-size:.78rem}
			.badge-USER{background:#eef2ff;color:#1d4ed8}
			.badge-SELLER{background:#ecfdf3;color:#047857}
			.badge-ADMIN{background:#fff1f2;color:#be123c}
			.badge-SHIPPER{background:#fef3c7;color:#92400e}
		</style>

		<div class="page-wrap">

			<!-- Breadcrumb -->
			<nav aria-label="breadcrumb" class="mb-3">
				<ol class="breadcrumb">
					<li class="breadcrumb-item"><a href="/admin/dashboard">Dashboard</a></li>
					<li class="breadcrumb-item active" aria-current="page">Users</li>
				</ol>
			</nav>

			<div class="d-flex align-items-center justify-content-between mb-3">
				<h3 class="m-0">User Management</h3>
				<div class="text-muted">Quản lý người dùng hệ thống</div>
			</div>

			<a href="/admin/customers/create-customers" class="btn btn-primary mb-3">
				<i class="bi bi-person-plus"></i> Thêm user
			</a>

			<!-- Toolbar -->
			<div class="card mb-3">
				<div class="card-body">
					<div class="row g-2 align-items-center">
						<div class="col-12 col-md-4">
							<div class="input-group">
								<span class="input-group-text bg-white"><i class="bi bi-search"></i></span>
								<input id="searchEmail" type="text" class="form-control" placeholder="Tìm theo email...">
								<button id="btnSearch" class="btn btn-primary">Tìm</button>
							</div>
						</div>
						<div class="col-6 col-md-3">
							<select id="roleFilter" class="form-select">
								<option value="">— Lọc theo vai trò —</option>
								<option value="USER">USER</option>
								<option value="SELLER">SELLER</option>
								<option value="ADMIN">ADMIN</option>
								<option value="SHIPPER">SHIPPER</option>
							</select>
						</div>
						<div class="col-6 col-md-3">
							<select id="statusFilter" class="form-select">
								<option value="">— Lọc theo trạng thái —</option>
								<option value="1">Active</option>
								<option value="0">Inactive</option>
							</select>
						</div>
						<div class="col-12 col-md-2 text-md-end">
							<button id="btnReload" class="btn btn-outline-secondary w-100">
								<i class="bi bi-arrow-clockwise"></i> Tải lại
							</button>
						</div>
					</div>
				</div>
			</div>

			<!-- Table -->
			<div class="card">
				<div class="card-body">
					<div class="table-responsive">
						<table id="userTable" class="table align-middle">
							<thead>
							<tr>
								<th style="width:80px">ID</th>
								<th>Email</th>
								<th>Họ tên</th>
								<th>Phone</th>
								<th style="width:120px">Role</th>
								<th style="width:110px">Status</th>
								<th style="width:180px" class="text-center">Actions</th>
							</tr>
							</thead>
							<tbody id="tblUsers"><!-- rows by JS --></tbody>
						</table>
					</div>

					<!-- Pagination (client-side) -->
<!--					<div class="d-flex justify-content-between align-items-center mt-2">-->
<!--						<div id="countInfo" class="text-muted small"></div>-->
<!--						<nav><ul class="pagination pagination-sm mb-0" id="pager"></ul></nav>-->
<!--					</div>-->
					<div class="d-flex justify-content-center mt-3">
						<div id="pagination" class="btn-group"></div>
					</div>
				</div>
			</div>
		</div>

		<!-- Delete Modal -->
		<div class="modal fade" id="confirmDel" tabindex="-1" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header"><h5 class="modal-title">Xác nhận xoá</h5>
						<button class="btn-close" data-bs-dismiss="modal"></button>
					</div>
					<div class="modal-body">Bạn chắc muốn xoá user <b id="delEmail">...</b> (ID: <span id="delId"></span>)?</div>
					<div class="modal-footer">
						<button class="btn btn-secondary" data-bs-dismiss="modal">Huỷ</button>
						<button id="btnDoDelete" class="btn btn-danger">Xoá</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Toast -->
		<div class="position-fixed bottom-0 end-0 p-3" style="z-index:1080">
			<div id="toast" class="toast align-items-center text-bg-success border-0" role="alert">
				<div class="d-flex">
					<div class="toast-body" id="toastMsg">Done!</div>
					<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
				</div>
			</div>
		</div>
	</div>

</div><!-- /layout replace -->

</body>
<script th:src="@{/js/admin/admin-users.js}"></script>
</html>
