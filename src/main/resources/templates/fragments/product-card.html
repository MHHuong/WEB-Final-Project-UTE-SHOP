<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<body>
<div th:fragment="product-card(product)" class="card card-product h-100 position-relative">
    <div class="card-body">
        <div class="text-center position-relative">
            <a th:href="@{/products/{id}(id=${product.productId})}">

                <img th:src="@{${product.imageUrl}}"
                     alt="Product Image" class="mb-3 img-fluid"
                     style="height: 180px; object-fit: cover;" />
            </a>

            <div class="card-product-action position-relative">
                <a href="#!" class="btn-action-wishlist btn-action" data-bs-toggle="tooltip" data-bs-html="true" title="Wishlist"
                   th:data-id="${product.productId}"
                ><i class="bi bi-heart"></i></a>
            </div>
        </div>

        <div class="text-small mb-1">
            <a th:href="@{/shop/category/{name}(name=${product.categoryName})}" class="text-decoration-none text-muted">
                <small th:text="${product.categoryName}">Category</small>
            </a>
        </div>

        <h2 class="fs-6">
            <a th:href="@{/products/{id}(id=${product.productId})}" class="text-inherit text-decoration-none stretched-link"
               th:text="${product.name}">Product Name</a>
        </h2>

        <div>
            <th:block>
                <small class="text-warning">
                    <i class="bi bi-star-fill"></i>
                    <span th:text="${#numbers.formatDecimal(product.averageRating, 1, 1)}">4.5</span>
                </small>
                <span class="text-muted small" th:text="${'(' + product.reviewCount + ')'}">(149)</span>
            </th:block>
        </div>

        <div class="d-flex justify-content-between align-items-center mt-3 position-relative">
            <div>
                <span class="text-dark fw-bold" th:text="${#numbers.formatInteger(product.price, 1, 'POINT')} + 'đ'">1.000.000đ</span>
            </div>
            <div>
                <a th:href="@{/cart/add(productId=${product.productId})}" th:data-id="${product.productId}" class="btn btn-primary btn-sm btn-add-cart">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-plus">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Add
                </a>
            </div>
        </div>
    </div>
    <script type="module" src="./js/productCard.js" defer></script>
    <style>
        .btn-action-wishlist {
            transition: all 0.3s ease;
        }
        .btn-action-wishlist i {
            transition: all 0.3s ease;
        }
        .btn-action-wishlist.active {
            background-color: #dc3545 !important;
            border-color: #dc3545 !important;
        }
        .btn-action-wishlist.active i {
            color: #fff !important;
        }
        .btn-action-wishlist.active:hover {
            background-color: #c82333 !important;
            border-color: #bd2130 !important;
            transform: scale(1.1);
        }
        .btn-action-wishlist.active i {
            animation: heartBeat 0.3s ease;
        }

        @keyframes heartBeat {
            0%, 100% {
                transform: scale(1);
            }
            25% {
                transform: scale(1.3);
            }
            50% {
                transform: scale(1.1);
            }
            75% {
                transform: scale(1.2);
            }
        }
        .card-product .btn-add-cart,
        .card-product .btn-action,
        .card-product .btn-action-wishlist {
            position: relative;
            z-index: 2;
        }
    </style>
</div>
</body>
</html>